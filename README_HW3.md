# Описание:

Консольное приложения для отслеживания привычек.

## Стек:

Java 17, JUnit, AssertJ, Mockito, Gradle, Jdbc, TestContainers, PostgreSQL, Servlets, AspectJ, MapStruct, Jackson

## Инструкция по запуску проекта:

```bash
git clone https://github.com/ExToozy/java_intensive.git
cd java_intensive
git checkout homework3
gradle war
cp build\habit_tracker-1.0-SNAPSHOT.war path\to\tomcat\webapps\
path\to\tomcat\bin\startup.bat
```

## Эндпоинты

- /api/login
    - POST
        - email
        - password
            - 200 - успешный вход
            - 400 - пользователь не найден или поля json не прошли валидацию
            - 500 - ошибка сервера
    - в остальных случаях
        - 405 - метод не доступен

- /api/register
    - POST
        - email
        - password
            - 200 - успешный вход
            - 400 - пользователь не найден или поля json не прошли валидацию
            - 500 - ошибка сервера

- /api/habits
    - GET
        - 200 - получены привычки пользователя
        - 401 - пользователя не авторизован или не валидный токен
        - 500 - ошибка сервера
    - POST
        - name
        - description
        - frequency
            - 201 - у пользователя создана новая привычка
            - 400 - поля json не прошли валидацию
            - 401 - пользователя не авторизован или не валидный токен
            - 500 - ошибка сервера
    - PUT
        - habitId
        - name
        - description
        - frequency
            - 200 - привычка обновлена
            - 400 - поля json не прошли валидацию или привычка не принадлежит пользователю
            - 401 - пользователя не авторизован или не валидный токен
            - 500 - ошибка сервера
    - DELETE
        - habitId
            - 204 - привычка удалена
            - 400 - поля json не прошли валидацию
            - 401 - пользователя не авторизован или не валидный токен
            - 500 - ошибка сервера
    - в остальных случаях
        - 405 - метод не доступен

- /api/habit-tracks
    - GET
        - 200 - получены отметки пользователя
        - 401 - пользователя не авторизован или не валидный токен
        - 500 - ошибка сервера
    - POST
        - habitId
            - 201 - у пользователя привычки пользователя появилась запись о выполнении
            - 400 - поля json не прошли валидацию или привычка не принадлежит пользователю
            - 401 - пользователя не авторизован или не валидный токен
            - 500 - ошибка сервера
    - DELETE
        - trackId
            - 204 - отметка о выполнении удалена
            - 400 - поля json не прошли валидацию
            - 401 - пользователя не авторизован или не валидный токен
            - 500 - ошибка сервера
    - в остальных случаях
        - 405 - метод не доступен
- /api/habit-statistics
    - GET
        - 200 - получена статистика о выполнении всех привычек пользователя
        - 401 - пользователя не авторизован или не валидный токен
        - 500 - ошибка сервера
    - в остальных случаях
        - 405 - метод не доступен

- /api/users
    - GET
        - 200 - получены все пользователи(доступно только для администратора)
        - 401 - пользователя не авторизован или не валидный токен
        - 405 - если пользователь не администратор
        - 500 - ошибка сервера
    - POST
        - userId
            - 201 - у указанного пользователя будет сменен статус администратора
            - 400 - поля json не прошли валидацию
            - 401 - пользователя не авторизован или не валидный токен
            - 405 - если пользователь не адмминистратор
            - 500 - ошибка сервера
    - PUT
        - userId
        - email
        - password
            - 200 - данные пользователя обновлены
            - 400 - json не прошёл валидацию или если выполняющий пользователь(не администратор) пытается обновить
              другого пользователя
            - 401 - пользователя не авторизован или не валидный токен
            - 500 - ошибка сервера
    - DELETE
        - habitId
            - 204 - пользователь удален
            - 400 - json не прошёл валидацию или если выполняющий пользователь(не администратор) пытается удалить
              другого пользователя
            - 401 - пользователя не авторизован или не валидный токен
            - 500 - ошибка сервера
    - в остальных случаях
        - 405 - метод не доступен

- в остальных случаях
    - 404 - эндпоинт не существует